<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>WebGL through Three JS</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/theme/default.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <script>
      // If the query includes 'print-pdf' we'll use the PDF print sheet
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Used to fade in a background when a specific slide state is reached -->
      <div class="state-background"></div>

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-state="boom">
          <h1>WebGL with Three JS</h1>
          <h3>Real time rendering in javascript</h3>
          <canvas data-sample="spinning_wireframe_torus"></canvas>
        </section>

        <section>
          <h2>Rendering Techniques</h2>
          <ul>
            <li>
            Rasterization
            <blockquote style="width:90%">
              The task of taking an image described in a vector graphics format (shapes)
              and converting it into a raster image (pixels or dots)
            </blockquote>
            </li>
            <br/>
            <br/>
            <li>Ray Casting</li>
            <li>Ray Tracing</li>
          </ul>
        </section>

        <section>
          <h2>Realtime vs Prerendered</h2>
          <img class="float_left" src="http://origin.arstechnica.com/reviews/games/super-smash-bros-review.media/1.jpg">
          <div class="float_left" style="line-height: 8; padding: 20px">vs</div>
          <img class="float_left" style="width: 320px; " src="http://static.guim.co.uk/sys-images/Film/Pix/pictures/2009/11/13/1258137150094/Avatar-001.jpg">
        </section>

        <section>
          <section>
            <h3> How do we get from </h3>
            <img class="float_left" style="display:inline" src="images/Vertices.png">
            <div class="float_left" style="line-height: 8; padding: 20px">to</div>
            <canvas data-sample="spinning_cube" class="float_left" style="display:inline"></canvas>
            <div class="float_left" style="line-height: 5; padding: 20px">?</div>
          </section>

          <section>
            <h2>What is a vertex?</h2>
            <p>A vertex is a special kind of point that describes the corners or intersections of geometric shapes</p>
            <img class="white_bg" src="http://obviam.net/wp-content/uploads/2011/01/Vertices.png">
          </section>

          <section>
            <h2>What is Euclidean Space?</h2>
            <img class="white_bg" src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Coord_system_CA_0.svg/620px-Coord_system_CA_0.svg.png">
          </section>

          <section>
            <h2>Model (or Object) Space</h2>
            <p>The space local to the object (or model) in question. It alone exists in this space and is often centered around (0,0,0).</p>
            <img src="images/apache_model_space.png">
          </section>

          <section>
            <h2>World Space</h2>
            <p>Where all objects are positioned. All objects placed in the actual representation of the world.</p>
            <img src="http://www.simulshop.com/product/nemethdesigns/ec135/tn_fsx2008-49-47.jpg" style="height: 70%">
          </section>

          <section>
            <h2>View (or Camera) Space</h2>
          </section>

          <section>
            <h2>Screen (or Projection) Space</h2>
          </section>

          <section>
            <h2>Rasterization: Shapes -> Pixels</h2>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Rasterisation-triangle_example.svg/450px-Rasterisation-triangle_example.svg.png">
          </section>

          <section>
            <h2>Coloring the pixels</h2>
          </section>

          <section>
            <h2>Transforming between Spaces</h2>
            <blockquote>Model -> World -> Screen Space</blockquote>
            <p>We need to transform the vertices in model space to world space, but how?</p>
          </section>
        </section>

        <section>
          <section>
            <h1>Welcome to Linear Algebra</h1>
            <img class="fragment" src="http://cronwtf.github.com/images/wtf.jpg">
          </section>

          <section>
            <h3>Matrix, 2D Linear Transform!</h3>
            <img class="float_left" src="http://tutorial.math.lamar.edu/Classes/LinAlg/LinearTransformations_files/image002.gif">
            <br/>
            <ol>
              <li><img class="white_bg" src="images/matrix_multiplication_x_axis_start.png"></li>
              <li class="fragment"><img class="white_bg" src="images/matrix_multiplication_x_axis_x.png"></li>
              <li class="fragment"><img class="white_bg" src="images/matrix_multiplication_x_axis_y.png"></li>
            </ol>
          </section>

          <section>
            <h3>Matrices to Spaces</h3>
            <br/>
            <ul>
              <li>
                scaling by 2 in all directions:<br/>
                <img class="white_bg" style="width: 200px" src="http://upload.wikimedia.org/math/2/6/a/26a088adf02ba09dc958acba0e81a3c3.png">
              </li>

              <li class="fragment">
                rotation by 90 degrees counterclockwise:<br/>
                <img class="white_bg" style="width: 200px" src="http://upload.wikimedia.org/math/4/b/d/4bd8fd7253c5bbd65c2e9f8fb7220b19.png">
              </li>

              <li class="fragment">
                identity matrix (multiplying by it has no change):<br/>
                <img class="white_bg" style="width: 200px" src="images/identity_matrix.png">
              </li>
            </ul>
          </section>

          <section>
            <h2>3D Identity Matrix</h2>
            <p>Just throw in another dimension</p>
            <br/>
            <pre class="math">

           [1, 0, 0]  &lt;- X Components of Axis Vectors
identity = [0, 1, 0]  &lt;- Y Components of Axis Vectors
           [0, 0, 1]  &lt;- Z Components of Axis Vectors


           [1, 0, 0] [x]   [x]
           [0, 1, 0] [y] = [y]
           [0, 0, 1] [z]   [z]

            </pre>
          </section>

          <section>
            <h3>Matrix, 3D Affine Transform!</h3>
            <p>Adding translation...</p>
            <br/>
            <pre class="math">

           [1, 0, 0, tx]  &lt;- X Components of Axis Vectors
           [0, 1, 0, ty]  &lt;- Y Components of Axis Vectors
           [0, 0, 1, tz]  &lt;- Z Components of Axis Vectors
            ^  ^  ^   ^-------- Translation Vector

           [1, 0, 0, tx] [x]   [x + tx]
           [0, 1, 0, ty] [y] = [y + ty]
           [0, 0, 1, tz] [z]   [z + tz]
           [0, 0, 0,  1] [1]   [     1]

            </pre>
          </section>

          <section>
            <h2>Composite Transformation: Model-View-Projection (MVP!) Matrix</h2>
            <p>Putting it all together</p>
            <p>One reason order is significant is that transformations like rotation and scaling are done
            with respect to the origin of the coordinate system. Scaling an object that is centered at the origin produces
            a different result than scaling an object that has been moved away from the origin.
            Similarly, rotating an object that is centered at the origin produces a different result than rotating an object
            that has been moved away from the origin.</p>

            <p>A single Matrix object can store a single transformation or a sequence of transformations.
            The latter is called a composite transformation. The matrix of a composite transformation is obtained
            by multiplying the matrices of individual transformations.</p>
            <p>Then AB = C, that is, the matrix of the composition (or the product) of linear transformations
            is the product of their matrices with respect to the given bases.</p>
          </section>

          <section>
            <h2>Rendering Demystified</h2>
            <canvas data-sample="spinning_cube"></canvas>
            <canvas class="float-left" data-sample="spinning_wireframe_torus"></canvas>
          </section>

          <section>
            <h2>Transporters will definitely use Linear Algebra</h2>
            <img src="http://storiesbywilliams.files.wordpress.com/2012/05/transport.jpg">
          </section>
        </section>

        <section>
          <section>
            <h2>Graphic Pipelines: How it started</h2>
            <h3>Software Rendering</h3>
            <img style="width: 480px;" src="http://1.bp.blogspot.com/-tQMjfiveb88/T5HvOfXc63I/AAAAAAAAB38/P_Nmtyw7-v8/s1600/prince-of-persia.gif">
            <ul>
              <li>Entirely done on CPU</li>
              <li>Unaided by graphics hardware</li>
              <li>Ultimate flexibility</li>
            </ul>
          </section>

          <section>
            <h3>How it was: Fixed Function Pipeline</h3>
            <img src="http://www.many-core.group.cam.ac.uk/platforms/pipeline_big.png">
            <ul>
              <li>Introduction of GPU hardware support</li>
              <li>Sacrificed flexibility for speed</li>
            </ul>
          </section>

          <section>
            <h3>How it was: Fixed Function Pipeline</h3>
            <img src="http://cdn.steampowered.com/v/gfx/apps/2310/0000002448.600x338.jpg?t=1343157013">
            <img src="http://www.techspot.com/reviews/hardware/voodoo3-3000/box_p.jpg">
            <small style="font-size: 10px; display: block;">I couldn't find an image of a voodoo 1 card</small>
          </section>

          <section>
            <h2>The Graphics Card</h2>
            <img src="http://www.sjbaker.org/wiki/images/thumb/3/31/Graphics_pipeline.png/800px-Graphics_pipeline.png">
          </section>

          <section>
            <h3>How it is: Programmable Graphics Pipeline</h3>
            <!-- <img src="http://chrisingradschool.files.wordpress.com/2010/03/screen-shot-2010-03-09-at-2-13-26-pm.png?w=600&h=279"> -->
            <img src="http://www.many-core.group.cam.ac.uk/platforms/pipeline_big.png">
          </section>

          <section>
            <h3>How it is: Programmable Graphics Pipeline</h3>
            <img src="http://chrisingradschool.files.wordpress.com/2010/03/screen-shot-2010-03-09-at-2-13-26-pm.png?w=600&h=279">
          </section>

          <section>
            <h3>How it is: Programmable Graphics Pipeline</h3>
            <img src="http://4.bp.blogspot.com/-2YJsDFkdVqM/Tx_J4bw8HnI/AAAAAAAAATk/Y1RN1finStI/s1600/Call-of-Duty-Modern-Warfare-3-Gameplay-Reveal-Trailer_3.jpg">
            <p>Best of both worlds (almost)</p>
          </section>
        </section>

        <section>
          <section>
            <h1>What is WebGL?</h1>
            <p>OpenGL ES2.0 port built into the &lt;canvas&gt; DOM element</p>
          </section>
        </section>

        <section>
          <section>
            <h2>Vertex Processor</h2>
            <p>Delivering an object near you from model space to screen space!</p>
            <p>but how?</p>
          </section>

          <section>
            <h2>Vertex Shaders</h2>
            <p>Programs run on the Vertex processor to tranform a vertex from model space to screen space</p>
          </section>
        </section>

        <section>
          <section>
            <h2>Fragment Processor</h2>
            <p>Adding color to pixels</p>
            <p>but how?</p>
          </section>

          <section>
            <h3>Applying Textures!</h3>
          </section>

          <section>
            <h2>Lighting Basics</h2>
            <p>All done in the Fragment Shader</p>
            <ul>
              <li>Ambient</li>
              <li>Diffuse</li>
              <li>Specular</li>
            </ul>
          </section>

          <section>
            <h2>Materials</h2>
          </section>
        </section>

        <section>
          <section>
            <h1>What is ThreeJS?</h1>
            <blockquote class="medium" style="margin-top: 80px; width: 100%">
              The aim of the project is to create a lightweight 3D library with a very low level of complexity â€” in other words, for dummies.
              <br/>
              <br/>
              The library provides &lt;canvas&gt;, &lt;svg&gt; and WebGL renderers.
            </blockquote>
          </section>

          <section>
            <h3>Intro to ThreeJS: Spinning Cube</h3>
            <pre class="small"><code contenteditable>
function init(canvas) {
  var scene = new THREE.Scene();

  var camera = new THREE.PerspectiveCamera( 75, 320/240, 1, 1000 );
  camera.position.z = 100;

  var geometry = new THREE.CubeGeometry( 70, 70, 70 );
  var material = new THREE.MeshLambertMaterial( { color: 0xdddddd } );

  var mesh = new THREE.Mesh( geometry, material );
  scene.add( mesh );

  var renderer = new THREE.CanvasRenderer({canvas: canvas});
  renderer.setSize( 320, 240 );

  function animate() {
    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame( animate );

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;
    renderer.render( scene, camera );
  }
  animate();
}
            </code></pre>
          </section>

          <section>
            <h3>Scene</h3>
            <pre class="medium"><code contenteditable>
function init(canvas) {
  var scene = new THREE.Scene();
            </code></pre>
          </section>

          <section>
            <h3>Camera</h3>
            <pre class="medium"><code contenteditable>
var camera = new THREE.PerspectiveCamera(75, 320/240, 1, 1000);
camera.position.z = 100;
            </code></pre>
          </section>

          <section>
            <h3>Geometry</h3>
            <pre class="medium"><code contenteditable>
  var geometry = new THREE.CubeGeometry( 70, 70, 70 );
            </code></pre>
          </section>

          <section>
            <h3>Materials</h3>
            <pre class="medium"><code contenteditable>
var material = new THREE.MeshLambertMaterial({ color: 0xdddddd });
            </code></pre>
          </section>

          <section>
            <h3>Mesh</h3>
            <pre class="medium"><code contenteditable>
  var mesh = new THREE.Mesh( geometry, material );
  scene.add( mesh );
            </code></pre>
          </section>

          <section>
            <h3>Renderer</h3>
            <pre class="medium"><code contenteditable>
  var renderer = new THREE.CanvasRenderer({canvas: canvas});
  renderer.setSize( 320, 240 );
            </code></pre>
            <p>The moment you add lighting, the CanvasRenderer's performance goes to shit.</p>
            <p>Makes sense because now you have to perform a SIMD instruction on CPU</p>
          </section>

          <section>
            <h3>requestAnimationFrame?</h3>
            <p>Welcome to the render (or game) loop</p>
            <pre class="medium"><code contenteditable>
  function animate() {
    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame( animate );

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;
    renderer.render( scene, camera );
  }
  animate();
            </code></pre>
          </section>

          <section data-state="boom">
            <h1>BOOM!</h1>
            <canvas data-sample="spinning_cube"></canvas>
          </section>
        </section>

        <section>
          <section>
            <h2>ThreeJS: Vertex Shaders</h2>
            <p>MVP Transformation</p>
          </section>
        </section>

        <section>
          <section>
            <h2>ThreeJS: Fragment Shaders</h2>
            <p>Texturing and Lighting</p>
          </section>
        </section>

        <section>
          <section>
            <h2>ThreeJS: Loading Meshes</h2>
            <br/>
            <ul>
              <li>Leverage CAD design tools to create models</li>
              <li>Grab models from <a href="http://www.blendswap.com/blends/vehicles/star-trek-collection/">Blendswap: Startrek Collection</a></li>
            </ul>
          </section>

          <section>
            <h2>Blender</h2>
            <br/>
            <ul>
              <li>Blender is a 3D Model content creation suite similar to Maya and 3D Studio Max</li>
              <li>Can export to either Three js file format or Collada for rendering</li>
            </ul>
          </section>

          <section>
            <h2>ThreeJS: File Format</h2>
            <a href="js/meshes/Startrek_Enterprise.js">Startrek Enterprise Mesh</a>
            <p>Credit for model goes to <a href="http://www.blendswap.com/?author=3134">Chris Kuhn</a></p>
          </section>

          <section>
            <h2>ThreeJS: Importing Mesh</h2>
            <br/>
            <pre class="medium"><code contenteditable>
// REMOVED
// var geometry = new THREE.CubeGeometry( 70, 70, 70 );
// var material = new THREE.MeshLambertMaterial({color: 0xdddddd});

var loader = new THREE.JSONLoader();
loader.load("js/meshes/Startrek_Enterprise.js", function(geometry) {

  mesh = new THREE.Mesh( geometry, geometry.materials[0] );
  scene.add( mesh );
            </code></pre>
          </section>

          <section data-state="loaded_enterprise">
            <h2>BOOM!</h2>
            <canvas data-sample="load_startrek_enterprise"></canvas>
          </section>

          <section data-state="loaded_apache">
            <h2>BOOM! with Textures</h2>
            <a href="images/FinalApacheTexture.png">Apache Texture File</a>
            <canvas data-sample="load_apache"></canvas>
          </section>
        </section>

        <section>
          <section>
            <h2>Vertex Shaders: The good stuff</h2>
          </section>

          <section>
            <h2>Particles</h2>
          </section>

          <section>
            <h2>Showcase: A Million Particles</h2>
            <a href="http://mrdoob.com/lab/javascript/webgl/particles/magicdust.html">Magic Dust Particles</a>
          </section>
        </section>

        <section>
          <section>
            <h2>Fragment Shaders: The real good stuff</h2>
          </section>

          <section>
            <h2>Bump Mapping</h2>
            <img src="http://img.photobucket.com/albums/v348/spartan_mortis/chiefnoshader.jpg">
          </section>

          <section>
            <h2>Showcase: Skin Material</h2>
            <a href="http://mrdoob.github.com/three.js/examples/webgl_materials_bumpmap_skin.html">WebGL Skin Material</a>
          </section>

          <section>
            <h2>Post-Processing: Blur</h2>
            <p>Multiple rendering passes...</p>
          </section>

          <section>
            <h2>Post-Processing: Bloom</h2>
          </section>

          <section>
            <h2>Showcase: Lighting</h2>
            <a href="http://codeflow.org/webgl/deferred-irradiance-volumes/www/">Deferred Irradiance Volumes</a>
          </section>

          <section>
            <h3>Game Time: Spot the feature!</h3>
            <img src="http://4.bp.blogspot.com/-2YJsDFkdVqM/Tx_J4bw8HnI/AAAAAAAAATk/Y1RN1finStI/s1600/Call-of-Duty-Modern-Warfare-3-Gameplay-Reveal-Trailer_3.jpg">
          </section>
        </section>

        <section>
          <section>
            <h2>Video Textures</h2>
          </section>
        </section>

        <section>
          <h3>John Carmack on WebGL</h3>
          <br/>
          <div class="ytapiplayer" id="ytplayer"
            data-youtube-url="http://www.youtube.com/v/ozxRRPJzZ78?enablejsapi=1&amp;version=3&amp;border=0"></div>
        </section>

        <section>
          <h1>A Mashup of Technologies</h1>
          <ul style="margin-top: 40px;">
            <li>This slide deck</li>
            <li><a href="http://www.chromeweblab.com/data-tracer">WebGL Tracert</a></li>
            <li><a href="http://dl.dropbox.com/u/6213850/WebGL/nyanCat/nyan.html">WebGL Nyan Cat</a></li>
          </ul>
        </section>

        <section>
          <h2>Omissions. For next time...</h2>
          <ul>
            <li>GPGPU</li>
            <li>Shadows</li>
            <li>Animations</li>
            <li>Terrain Rendering</li>
            <li>Dynamic Level of Detail</li>
            <li>Culling</li>
            <li>and more ...</li>
          </ul>
        </section>

      </div>

      <!-- The navigational controls UI -->
      <aside class="controls">
        <a class="left" href="#">&#x25C4;</a>
        <a class="right" href="#">&#x25BA;</a>
        <a class="up" href="#">&#x25B2;</a>
        <a class="down" href="#">&#x25BC;</a>
      </aside>

      <!-- Presentation progress bar -->
      <div class="progress"><span></span></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="lib/js/three.js"></script>
    <script src="lib/js/jquery.min.js"></script>
    <script src="lib/js/underscore.min.js"></script>
    <script src="lib/js/swfobject.js"></script>
    <script src="js/reveal.min.js"></script>
    <script src="js/stats_bootstrap.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,

        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/linear(2d)

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'lib/js/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'lib/js/data-markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'socket.io/socket.io.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
          { src: 'plugin/speakernotes/client.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
          { src: 'js/samples.js', async: true },
          { src: 'js/youtube.js', async: true, condition: function() { return $("#ytplayer").length > 0 } },
        ]
      });

    </script>
  </body>
</html>
